(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17ed5f8d"],{"0ef9":function(e,t,r){"use strict";r("6dbb");var a=r("d546"),n=r("ddc4"),l=r("a299"),s=r("655b"),o=r("0056"),c=s("species"),i=RegExp.prototype,u=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){return"$0"==="a".replace(/./,"$0")}(),f=s("replace"),p=function(){return!!/./[f]&&""===/./[f]("a","$0")}(),m=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,f){var g=s(e),h=!l((function(){var t={};return t[g]=function(){return 7},7!=""[e](t)})),b=h&&!l((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[c]=function(){return r},r.flags="",r[g]=/./[g]),r.exec=function(){return t=!0,null},r[g](""),!t}));if(!h||!b||"replace"===e&&(!u||!d||p)||"split"===e&&!m){var v=/./[g],x=r(g,""[e],(function(e,t,r,a,l){var s=t.exec;return s===n||s===i.exec?h&&!l?{done:!0,value:v.call(t,r,a)}:{done:!0,value:e.call(r,t,a)}:{done:!1}}),{REPLACE_KEEPS_$0:d,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),w=x[0],_=x[1];a(String.prototype,e,w),a(i,g,2==t?function(e,t){return _.call(e,this,t)}:function(e){return _.call(e,this)})}f&&o(i[g],"sham",!0)}},5647:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),r("el-breadcrumb-item",{attrs:{to:{path:"/form"}}},[e._v("商品列表")])],1),r("el-divider"),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form",{attrs:{inline:!0,model:e.form}},[r("el-form-item",[r("el-input",{attrs:{placeholder:"查询商品名称",clearable:""},model:{value:e.form.search,callback:function(t){e.$set(e.form,"search",t)},expression:"form.search"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.searchName}},[e._v("查询")])],1)],1)],1),r("el-col",{attrs:{span:1,offset:16}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fetch()}}},[r("i",{staticClass:"el-icon-refresh"}),e._v(" 刷新")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:""}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-row",[r("el-col",{attrs:{md:12}},[r("el-form-item",{attrs:{label:"创建时间"}},[[r("i",{staticClass:"el-icon-time"}),e._v(" "),r("span",[e._v(e._s(e._f("date")(t.row.createdAt)))])]],2)],1),r("el-col",{attrs:{md:12}},[r("el-form-item",{attrs:{label:"修改时间"}},[[r("i",{staticClass:"el-icon-time"}),e._v(" "),r("span",[e._v(e._s(e._f("date")(t.row.updatedAt)))])]],2)],1),r("el-col",{attrs:{md:12}},[r("el-form-item",{attrs:{label:"浏览次数"}},[r("i",{staticClass:"el-icon-view"}),e._v(" "),r("span",{staticClass:"color-green"},[e._v(e._s(t.row.browse))])])],1),r("el-col",{attrs:{md:24}},[r("el-form-item",{attrs:{label:"详情轮播图"}},[[r("el-row",e._l(t.row.skills,(function(e){return r("el-col",{key:e._id,staticStyle:{margin:"0 10px"},attrs:{md:6}},[r("el-image",{attrs:{src:e.image}})],1)})),1)]],2)],1)],1)],1)]}}])}),r("el-table-column",{attrs:{type:"index",width:"55"}}),r("el-table-column",{attrs:{prop:"_id",label:"编号",width:"230"}}),r("el-table-column",{attrs:{label:"商品分类",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",[e._v(e._s(t.row.categoryes))])]}}])}),r("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),r("el-table-column",{attrs:{label:"图片",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("img",{staticStyle:{width:"98px"},attrs:{src:e.row.image,alt:""}})]}}])}),r("el-table-column",{attrs:{label:"价格",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" ￥："+e._s(t.row.price)+" ")]}}])}),r("el-table-column",{attrs:{prop:"stock",label:"库存",width:"80"}}),r("el-table-column",{attrs:{prop:"user",label:"推荐指数",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-rate",{attrs:{disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value}"},model:{value:t.row.recommend,callback:function(r){e.$set(t.row,"recommend",r)},expression:"scope.row.recommend"}})]}}])}),r("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?r("el-tag",{attrs:{type:"success"}},[e._v("上架中")]):0==t.row.state?r("el-tag",{attrs:{type:"warning"}},[e._v("待上架")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("i",{staticClass:"el-icon-time"}),e._v(" "),r("span",[e._v(e._s(e._f("date")(t.row.createdAt)))])]}}])}),e.flag>10?r("el-table-column",{attrs:{label:"operation",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(r){return e.goOnline(t.row)}}},[e._v(" 上架 ")]),r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(r){return e.$router.push("/create-commodity/edit/"+t.row._id)}}},[e._v(" 编辑 ")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(r){return e.remove(t.row)}}},[e._v(" 删除 ")])]}}],null,!1,3616411899)}):e._e()],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[1,5,10,20,50],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1)},n=[],l=r("4833"),s=(r("6a61"),r("48e3"),r("6dbb"),r("67b6"),r("1472")),o=r.n(s),c={filters:{date:function(e){return o()(e).format("YYYY-MM-DD hh:mm")}},data:function(){return{flag:"",loading:!0,currentPage:1,pagesize:10,tableData:[],form:{search:""}}},created:function(){var e=this;setTimeout((function(){e.loading=!1}),500),this.flags(),this.fetch()},methods:{fetch:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/goods");case 2:r=t.sent,e.tableData=r.data;case 4:case"end":return t.stop()}}),t)})))()},remove:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.delete("/goods/".concat(e._id));case 2:r.sent,t.$message({type:"success",message:"删除成功"}),t.fetch();case 5:case"end":return r.stop()}}),r)})))()},goOnline:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.state=!0,r.next=3,t.$http.put("/goods/".concat(e._id),e);case 3:r.sent,t.$message({type:"success",message:"上架成功"});case 5:case"end":return r.stop()}}),r)})))()},flags:function(){var e=JSON.parse(window.localStorage.getItem("power"));this.flag=e},searchName:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!=e.form.search){t.next=2;break}return t.abrupt("return",e.$message({message:"请输入要搜索的内容",type:"warning"}));case 2:return r=e.form.search,t.next=5,e.$http.get("goods_search/".concat(r));case 5:a=t.sent,e.tableData=a.data,console.log(a),e.$message({message:"搜索到".concat(a.data.length,"条数据"),type:"success"});case 9:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e}}},i=c,u=(r("ca83"),r("4ac2")),d=Object(u["a"])(i,a,n,!1,null,"5a205c3a",null);t["default"]=d.exports},"67b6":function(e,t,r){"use strict";var a=r("0ef9"),n=r("719e"),l=r("b191"),s=r("edd5"),o=r("f1ae");a("search",1,(function(e,t,r){return[function(t){var r=l(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,r):new RegExp(t)[e](String(r))},function(e){var a=r(t,e,this);if(a.done)return a.value;var l=n(e),c=String(this),i=l.lastIndex;s(i,0)||(l.lastIndex=0);var u=o(l,c);return s(l.lastIndex,i)||(l.lastIndex=i),null===u?-1:u.index}]}))},"6dbb":function(e,t,r){"use strict";var a=r("e1de"),n=r("ddc4");a({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},ca83:function(e,t,r){"use strict";r("d598")},d598:function(e,t,r){},ddc4:function(e,t,r){"use strict";var a=r("d411"),n=r("8056"),l=r("e4af"),s=RegExp.prototype.exec,o=l("native-string-replace",String.prototype.replace),c=s,i=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),u=n.UNSUPPORTED_Y||n.BROKEN_CARET,d=void 0!==/()??/.exec("")[1],f=i||d||u;f&&(c=function(e){var t,r,n,l,c=this,f=u&&c.sticky,p=a.call(c),m=c.source,g=0,h=e;return f&&(p=p.replace("y",""),-1===p.indexOf("g")&&(p+="g"),h=String(e).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==e[c.lastIndex-1])&&(m="(?: "+m+")",h=" "+h,g++),r=new RegExp("^(?:"+m+")",p)),d&&(r=new RegExp("^"+m+"$(?!\\s)",p)),i&&(t=c.lastIndex),n=s.call(f?r:c,h),f?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=c.lastIndex,c.lastIndex+=n[0].length):c.lastIndex=0:i&&n&&(c.lastIndex=c.global?n.index+n[0].length:t),d&&n&&n.length>1&&o.call(n[0],r,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(n[l]=void 0)})),n}),e.exports=c},edd5:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},f1ae:function(e,t,r){var a=r("10ef"),n=r("ddc4");e.exports=function(e,t){var r=e.exec;if("function"===typeof r){var l=r.call(e,t);if("object"!==typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==a(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}}}]);
//# sourceMappingURL=chunk-17ed5f8d.37d4a059.js.map